!function(o,t,e,s){"use strict";function i(t,e){this.settings=o.extend(!0,{},n,e),this.target=o(t),this.nav=this.target.children(".ms-navigation"),this.steps=o("li > a",this.nav),this.container=this.target.children(".ms-container"),this.progress=this.target.children(".ms-progress"),this.content=this.container.children(".ms-content"),this.control=o(".ms-control",this.target),this.data=[],this.index=null,this.init()}var n={theme:"default",selected:0,keyController:!0,navigation:{next:"Next",prev:"Previous",submit:"Submit",btnNext:!0,btnPrev:!0,btnSubmit:!0,onSend:function(){}},message:{required:"This field is required.",email:"Please enter a valid email address.",phone:"Please enter a valid phone number.",alphaWithSpace:"Only alphabets are allowed."},progress:!0};o.extend(i.prototype,{init:function(){this.content.hide(),this._theme(),this._navigations(),this._progress(),this._events(),this._data(),this._show(this.settings.selected)},_theme:function(){"default"!==this.settings.theme&&this.target.addClass("ms-theme-"+this.settings.theme)},_navigations:function(){var t=!1!==this.settings.navigation.btnNext?o("<button></button>").html(this.settings.navigation.next).addClass("ms-btn ms-btn-next"):null,e=!1!==this.settings.navigation.btnPrev?o("<button></button>").html(this.settings.navigation.prev).addClass("ms-btn ms-btn-prev"):null,s=!1!==this.settings.navigation.btnSubmit?o("<button></button>").html(this.settings.navigation.submit).addClass("ms-btn ms-btn-submit"):null;this.control.append(e,t,s)},_progress:function(){if(this.settings.progress){var t=100/this.steps.length,e=o("<div></div>").addClass("ms-progress-bar").css("width",t+"%");this.progress.html(e)}else this.progress.remove()},_data:function(){var s=this;if(s.data.navigation=[],s.data.content=[],0<this.steps.length)for(var t=0;t<this.steps.length;t++)s.data.navigation.push({target:"#section-"+(t+1),field:[],completed:!1});o.each(s.data.navigation,function(t,e){o(e.target).find("[data-ms]").each(function(){s.data.navigation[t].field.push({type:o(this).attr("type"),regex:o(this).attr("regex")?o(this).attr("regex"):null,required:!!o(this).attr("required"),status:!1})})})},_next:function(){var t=this.index+1;this.steps.length<=t&&(t=0),this._validation(t)&&this._show(t)},_prev:function(){var t=this.index-1;t<=0&&(t=0),this._validation(this.index),this._show(t)},_key:function(t){t.preventDefault();switch(t.which){case 37:this._prev();break;case 39:this._next();break;default:return}},_show:function(t){this._loadContent(t)},_loadContent:function(t){var e=this.steps.eq(this.index),s=0<e.length?o(e.attr("href"),this.target):null,i=this.steps.eq(t),n=0<i.length?o(i.attr("href"),this.target):null;this.steps.eq(t);null!==this.index&&this.index!==t&&this.index,s&&0<s.length&&s.hide(),n.fadeIn(350),this._status(t),this.index=t,this._disabled()},_events:function(){var s=this;return o(this.steps).on("click",function(t){t.preventDefault();var e=s.steps.index(this);s._validation(s.index),e<s.index?s._show(e):s._validation(e)&&s._show(e)}),o(".ms-btn-next",this.target).on("click",function(t){t.preventDefault(),s._next()}),o(".ms-btn-prev",this.target).on("click",function(t){t.preventDefault(),s._prev()}),o(".ms-btn-submit",this.target).on("click",function(t){t.preventDefault();var e=s.index+1;s._validation(e)&&s.settings.navigation.onSend()}),s.settings.keyController&&o(e).keyup(function(t){s._key(t)}),!0},_status:function(t){if(this.steps.eq(this.index).parent("li").removeClass("current"),null!==this.index&&this.steps.eq(this.index).parent("li").addClass("completed"),this.steps.eq(t).parent("li").removeClass("completed").addClass("current"),this.settings.progress){var e,s=100/this.steps.length;e=this.steps.length==t+1?100:s*(t+1);var i=o("<div></div>").addClass("ms-progress-bar").css("width",e+"%");this.progress.html(i)}},_disabled:function(){var t=o(".ms-btn-next",this.target),e=o(".ms-btn-prev",this.target),s=o(".ms-btn-submit",this.target);this.index<=0?e.addClass("ms-disabled"):e.removeClass("ms-disabled"),this.index==this.steps.length-1?t.addClass("ms-disabled"):t.removeClass("ms-disabled"),this.index<this.steps.length-1?s.addClass("ms-disabled"):s.removeClass("ms-disabled")},_validation:function(s){var a=this,r=a.data.navigation[a.index],i=!1,h={email:/^\w*([-+.']\w*)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,numeric:/^[0-9]+$/,alphaWithSpace:/^[A-Za-z]+$/},t=this.steps.eq(this.index);(0<t.length?o(t.attr("href"),this.target):null).find("[data-ms]").each(function(t,e){var s=r.field[t],i=o(e).val(),n=o("<div></div>").addClass("ms-error");if(s.required)if(i)if(null!==s.regex)switch(s.regex){case"email":h.email.test(i)?(s.status=!0,o(e).parent(".ms-field").find(".ms-error").remove()):(s.status=!1,o(e).parent(".ms-field").find(".ms-error").remove(),o(e).before(n.append(a.settings.message.email)));break;case"phone":h.numeric.test(i)?(s.status=!0,o(e).parent(".ms-field").find(".ms-error").remove()):(s.status=!1,o(e).parent(".ms-field").find(".ms-error").remove(),o(e).before(n.append(a.settings.message.phone)));break;case"alphaWithSpace":h.alphaWithSpace.test(i)?(s.status=!0,o(e).parent(".ms-field").find(".ms-error").remove()):(s.status=!1,o(e).parent(".ms-field").find(".ms-error").remove(),o(e).before(n.append(a.settings.message.alphaWithSpace)))}else s.status=!0,o(e).parent(".ms-field").find(".ms-error").remove();else s.status=!1,o(e).parent(".ms-field").find(".ms-error").remove(),o(e).before(n.append(a.settings.message.required))});var e=r.field.filter(function(t){return t.required});0<e.length?o.each(e,function(t,e){if(!e.status)return r.completed=!1;r.completed=!0}):r.completed=!0;var n=a.data.navigation.filter(function(t,e){return e<s});return o.each(n,function(t,e){if(!e.completed)return i=!1;i=!0}),i}}),o.fn.multistep=function(t){var e,s=arguments;return void 0===t||"object"==typeof t?this.each(function(){o.data(this,"multistep")||o.data(this,"multistep",new i(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(e=o.data(this[0],"multistep"),"destroy"===t&&o.data(this,"multistep",null),e instanceof i&&"function"==typeof e[t]?e[t].apply(e,Array.prototype.slice.call(s,1)):this):void 0}}(jQuery,window,document);